name: 'SharePoint Release'

on: [workflow_dispatch]

jobs:
  download:
    runs-on: ubuntu-latest

    steps:
    - name: Cloning repo # This step is required
      uses: actions/checkout@v3

    - name: Download file from SharePoint
      env:
        SHAREPOINT_FILE_URL: 'https://sysforetech-my.sharepoint.com/:x:/g/personal/vijayaraghavan_s_sysfore_com/EXDr_JoZAadGhrqD-Ds9vU8BcTRp1gyTCDlPAqiTVCTuOw?download=1'
      run: |
        echo "Downloading file from SharePoint..."
        curl -L "$SHAREPOINT_FILE_URL" -o ./downloaded_file
        echo "File downloaded and saved to ./downloaded_file"
        ls -lrt
        if [ -s ./downloaded_file ]; then
          echo "Reading file content..."
          cat ./downloaded_file
        else
          echo "File is empty or download failed."
        fi
